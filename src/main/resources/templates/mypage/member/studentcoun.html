<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/3a29a769fa.js" crossorigin="anonymous"></script>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="/css/mypage.css">
    <link rel="stylesheet" href="/css/mypage_sang.css">

    <title>상담정보</title>
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/selectAll1.js"></script>
<!--    <script src="/js/coun-modal.js"></script>-->
</head>
<body>
<section class="vbox">

    <!-- 상단 네비게이션 자리  -->
    <header class="bg-dark dk header navbar navbar-fixed-top-xs">
        <!--취업정보센터 링크 -->
        <div class="navbar-header aside-md">
            <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html"><i
                    class="fa fa-bars"></i></a>


            <a href="/" class="navbar-brand" data-toggle="fullscreen"><i class="fas fa-book-open"></i> </i>
                취업정보센터</a>

            <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".nav-user"><i
                    class="fa fa-cog"></i></a>
        </div>

        <ul class="nav navbar-nav navbar-right m-n hidden-xs nav-user">
            <!-- 알림표시 -->
            <!-- open으로 작동 -->
<!--            <li class="hidden-xs">-->
<!--                <a href="#" class="dropdown-toggle dk" data-toggle="dropdown">-->
<!--                    <i class="fa fa-bell"></i>-->
<!--                    <span class="badge badge-sm up bg-danger m-l-n-sm count">2</span>-->
<!--                </a>-->
<!--                <section class="dropdown-menu aside-xl">-->
<!--                    <section class="panel bg-white">-->
<!--                        <header class="panel-heading b-light bg-light">-->
<!--                            <strong>확인하지 않은 <span class="count">2</span>개 알림</strong>-->
<!--                        </header>-->
<!--                        <div class="list-group list-group-alt animated fadeInRight">-->
<!--                            <a href="#" class="media list-group-item">-->
<!--                                &lt;!&ndash; <span class="pull-left thumb-sm"><img src="images/avatar.jpg" alt="John said" class="img-circle"></span> &ndash;&gt;-->
<!--                                <span class="media-body block m-b-none"> 알림보여주는 자리<br>-->
<!--                                        <small class="text-muted">10분</small>-->
<!--                                        <small class="text-muted">전</small>-->
<!--                                    </span>-->
<!--                            </a>-->
<!--                            <a href="#" class="media list-group-item">-->
<!--                                    <span class="media-body block m-b-none">알림보여주는 자리<br><small-->
<!--                                            class="text-muted">1일</small>-->
<!--                                        <small class="text-muted">전</small></span>-->
<!--                            </a>-->
<!--                        </div>-->

<!--                        <footer class="panel-footer text-sm">-->
<!--                            <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>-->
<!--                            <a href="#notes" data-toggle="class:show animated fadeInRight">모든알림 보러가기</a>-->
<!--                        </footer>-->
<!--                    </section>-->
<!--                </section>-->
<!--            </li>-->
            <!-- 로그아웃 드롭다운 메뉴 -->
            <!-- open -->
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <span> &nbsp; &nbsp;</span> [[${memberDTO.getUser_name}]] 님 <b class="caret"></b>
                </a>
                <ul class="dropdown-menu animated fadeInRight"> <span class="arrow top"></span>

                    <li> <a href="/mypage/member/modify">회원 정보수정</a> </li>
                    <!-- <li> <a href=""> <span class="badge bg-danger pull-right">3</span> 알림 </a> </li>  -->
                    <li class="divider"></li>
                    <li><a sec:authorize="isAuthenticated()" href="/logout" >Logout</a> </li>
                </ul>
            </li>
        </ul>
    </header>
    <!-- 상단 네비게이션 end -->

    <section>
        <section class="hbox stretch">
            <!-- .aside -->
            <!-- 왼쪽메뉴 -->
            <!-- nav-xs로 줄임 -->
            <aside class="bg-dark lter aside-md hidden-print " id="nav">
                <section class="vbox">
                    <!--MY HOME-->
                    <header class="header bg-primary lter text-center clearfix">
                        <button type="button" class="btn btn-sm btn-dark btn-icon" title="New project">
                            <i class="fas fa-home"></i>
                        </button>
                        <div class="btn-group hidden-nav-xs">
                            <a href="">
                                <button type="button" class="btn btn-sm btn-primary"
                                        style="font-size: 20px; margin-bottom: 10px;"></i> MY
                                    HOME

                                </button>
                            </a>

                        </div>
                    </header>
                    <!-- MY HOME END -->
                    <section class="w-f scrollable">
                        <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0"
                             data-size="5px" data-color="#333333">
                            <!-- aside nav -->
                            <div th:replace="mypage/member/aside :: body"/>
                            <!-- / nav -->
                        </div>
                    </section>

                    <footer class="footer lt hidden-xs b-t b-dark">
                        <!-- 메뉴숨길때 btn-icon active -->
                        <a href="#nav" data-toggle="class:nav-xs" class="pull-right btn btn-sm btn-dark btn-icon ">
                            <i class="fa fa-angle-left text"></i>
                            <i class="fa fa-angle-right text-active"></i>
                        </a>
                        <div class="btn-group hidden-nav-xs">
                        </div>
                    </footer>
                </section>
            </aside>

            <!-- /.aside -->
            <!-- 콘텐츠 자리 -->
            <section id="content">
                <section class="vbox">
                    <section class="scrollable padder">
                        <!-- 밑에서부터 컨텐츠 넣으면 되용 -->
                        <div id="content-frame">
                            <!-- 메뉴제목자리 -->
                            <div id="title" style="margin-bottom: 1em;">
                                <h1>상담 신청 내역</h1>
                            </div>
                            <!-- 주요컨텐츠 -->
                            <div id="main-content" style="height: 100vh;">
                                <div id="sang-con">
                                    <table class="type07">
                                        <thead>
                                        <tr>
                                            <td class="number">순번</td>
                                            <td class="type">상담분야</td>
                                            <td class="dtype">상담명</td>
                                            <td class="date">신청일시</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="enter" id="con_stay" th:each="ml : ${mylist}">
                                            <th scope="row">[[${ml.consult_num}]]</th>
                                            <td>[[${ml.type}]]</td>
                                            <td>[[${ml.name}]]</td>
                                            <td>[[${ml.consult_date}]]</td>
                                        </tr>

                                        </tbody>
                                    </table>


                                </div>
                            </div>
                        </div>
                    </section>
                </section>
                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen"
                   data-target="#nav"></a>
            </section>
            <!-- 콘텐츠 END -->

            <aside class="bg-light lter b-l aside-md hide" id="notes">
                <div class="wrapper">Notification</div>
            </aside>
        </section>
    </section>
</section> <!-- Bootstrap -->
</body>
<script src="/js/mypage.js"></script>
<script>
    $('input[name=radio]').change(function (){
        let radioVal=($('input[name=radio]:checked')).val();
        switch (radioVal) {
            case '전체':
                $('.enter').css('display','table-row');
                $('.ok').css('display','none');
                $('.no').css('display','none');
                break;
            case '승인':
                $('.enter').css('display','none');
                $('.ok').css('display','table-row');
                $('.no').css('display','none');
                break;
            case '거절':
                $('.enter').css('display','none');
                $('.ok').css('display','none');
                $('.no').css('display','table-row');
                break;
        }
    })

    function delete_list() {
        success_var=0;
        ajax_list = [];
        checked_length = $('.check:checked').length;
        for (i = 0; i < checked_length; i++) {
            index = ($('.check').index($('.check:checked'))); //<<1개만 반환됨
            ($('.check').eq(index)).prop("checked", false);
            num = $('.check').eq(index).parents(".sang_list_body").find(".number").text();  //해당 순번에 해당하는 열의 순번 저장

            $.ajax({
                url: "/remove/"+num,
                method: 'delete',
                success : function (result){
                    success_var=success_var+1;
                    if(success_var==checked_length) {
                        alert("처리되었습니다");
                        window.location.href = location.href;
                    }
                },
                error : function (err) {
                    alert("처리에 실패했습니다");
                }
            })
        }
        console.log(success_var);


    }
</script>
</body>
</html>
